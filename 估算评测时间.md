# SWE-Bench 评测时间估算

## 📊 系统性能测试结果

### 模型推理速度 (qwen2.5-coder:14b)

- **推理速度**: ~30-34 tokens/s
- **简单任务** (193 tokens): ~5.7 秒推理 + ~1.5 秒 API = **~7-10 秒/次**
- **中等任务** (500 tokens): 预估 **~15-20 秒/次**
- **复杂任务** (2000 tokens): 预估 **~60-70 秒/次**

### SWE-Bench 实例处理时间分解

每个实例的处理流程:

1. **理解问题** (1-2 次 LLM 调用)
   - 读取 issue 描述
   - 分析代码库结构
   - 时间: ~30-60 秒

2. **代码分析** (2-5 次 LLM 调用)
   - 定位相关文件
   - 理解代码逻辑
   - 时间: ~60-150 秒

3. **生成修复** (1-3 次 LLM 调用)
   - 编写修复代码
   - 代码审查和优化
   - 时间: ~30-90 秒

4. **测试验证** (1-2 次执行)
   - 运行测试
   - 修复错误
   - 时间: ~30-60 秒

**总计预估**: **每个实例 3-8 分钟** (取决于复杂度)

## ⏱️ 时间估算表

### 不同评测规模的时间预估

| 实例数 | 预估时间 (保守) | 预估时间 (乐观) | 说明 |
|--------|----------------|----------------|------|
| **1 个** | 3-5 分钟 | 2-3 分钟 | 快速验证 |
| **3 个** | 9-15 分钟 | 6-9 分钟 | 快速测试 |
| **5 个** | 15-25 分钟 | 10-15 分钟 | 小规模测试 |
| **10 个** | 30-50 分钟 | 20-30 分钟 | 中等测试 |
| **50 个** | 2.5-4 小时 | 1.5-2.5 小时 | 基线评测 |
| **300 个** (Lite) | 15-24 小时 | 10-15 小时 | 完整 Lite |
| **2,294 个** (Full) | 115-184 小时 | 75-115 小时 | 完整 Full |

### 5-10 分钟快速测试

**推荐配置**:
- **实例数**: **2-3 个**
- **最大迭代**: **15-20 次** (减少迭代以加快速度)
- **预计时间**: **5-10 分钟**

## 🎯 推荐方案

### 方案 A: 超快速验证 (5 分钟)

```bash
# 评测 2 个实例, 15 次迭代
./quick_test_5min.sh
```

**配置**:
- 实例数: 2
- 最大迭代: 15
- 预计时间: 5-7 分钟

### 方案 B: 标准快速测试 (10 分钟)

```bash
# 评测 3 个实例, 20 次迭代
./quick_test_10min.sh
```

**配置**:
- 实例数: 3
- 最大迭代: 20
- 预计时间: 8-12 分钟

### 方案 C: 小规模评测 (30 分钟)

```bash
# 评测 5 个实例, 30 次迭代
./run_small_eval.sh
```

**配置**:
- 实例数: 5
- 最大迭代: 30
- 预计时间: 25-35 分钟

## 📈 实际运行时间影响因素

### 加速因素
- ✅ 简单实例 (语法错误修复)
- ✅ 代码库较小
- ✅ 测试用例简单
- ✅ 模型快速响应

### 减速因素
- ❌ 复杂实例 (架构改动)
- ❌ 大型代码库
- ❌ 测试用例复杂
- ❌ 需要多次迭代修复

### 时间波动范围

- **最快**: 1-2 分钟/实例 (简单 bug 修复)
- **平均**: 3-5 分钟/实例 (中等复杂度)
- **最慢**: 8-15 分钟/实例 (复杂重构)

## 💡 优化建议

### 1. 减少迭代次数
- 默认 50 次 → 快速测试 15-20 次
- 节省时间: ~40-60%

### 2. 选择简单实例
- 优先选择标记为 "easy" 的实例
- 或选择代码库较小的项目

### 3. 并行运行 (如果有资源)
- 使用 `num_workers > 1`
- 注意: 需要更多内存和 CPU

### 4. 使用更快的模型
- 7B 模型比 14B 快约 2 倍
- 但准确率会下降

## 🎯 针对您的需求 (5-10 分钟)

**最佳配置**:

```bash
# 创建快速测试脚本
./create_quick_test.sh 2 15  # 2个实例, 15次迭代
```

**预期结果**:
- ✅ 验证环境配置正确
- ✅ 测试模型连接正常
- ✅ 获得初步性能数据
- ✅ 时间控制在 5-10 分钟

---

**更新时间**: 2025-11-22
**基于**: qwen2.5-coder:14b 实际测试数据

